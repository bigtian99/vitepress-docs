##  ä¸€ã€ä»€ä¹ˆæ˜¯SpringBoot [starter](https://so.csdn.net/so/search?q=starter&spm=1001.2101.3001.7020)æœºåˆ¶

SpringBootä¸­çš„starteræ˜¯ä¸€ç§éå¸¸é‡è¦çš„æœºåˆ¶(è‡ªåŠ¨åŒ–é…ç½®)ï¼Œèƒ½å¤ŸæŠ›å¼ƒä»¥å‰ç¹æ‚çš„é…ç½®ï¼Œå°†å…¶ç»Ÿä¸€é›†æˆè¿›starterï¼Œåº”ç”¨è€…åªéœ€è¦åœ¨mavenä¸­å¼•å…¥starterä¾èµ–ï¼ŒSpringBootå°±èƒ½è‡ªåŠ¨æ‰«æåˆ°è¦åŠ è½½çš„ä¿¡æ¯å¹¶å¯åŠ¨ç›¸åº”çš„é»˜è®¤é…ç½®ã€‚

starterè®©æˆ‘ä»¬æ‘†è„±äº†å„ç§ä¾èµ–åº“çš„å¤„ç†ï¼Œéœ€è¦é…ç½®å„ç§ä¿¡æ¯çš„å›°æ‰°ã€‚SpringBootä¼šè‡ªåŠ¨é€šè¿‡classpathè·¯å¾„ä¸‹çš„ç±»å‘ç°éœ€è¦çš„Beanï¼Œå¹¶æ³¨å†Œè¿›IOCå®¹å™¨ã€‚SpringBootæä¾›äº†é’ˆå¯¹æ—¥å¸¸ä¼ä¸šåº”ç”¨ç ”å‘å„ç§åœºæ™¯çš„spring-boot-starterä¾èµ–æ¨¡å—ã€‚

æ‰€æœ‰è¿™äº›ä¾èµ–æ¨¡å—éƒ½éµå¾ªç€çº¦å®šæˆä¿—çš„é»˜è®¤é…ç½®ï¼Œå¹¶å…è®¸æˆ‘ä»¬è°ƒæ•´è¿™äº›é…ç½®ï¼Œå³éµå¾ªâ€œçº¦å®šå¤§äºé…ç½®â€çš„ç†å¿µã€‚

## äºŒã€ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰starter

åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›ç‹¬ç«‹äºä¸šåŠ¡ä¹‹å¤–çš„é…ç½®æ¨¡å—ï¼Œæˆ‘ä»¬ç»å¸¸å°†å…¶æ”¾åˆ°ä¸€ä¸ªç‰¹å®šçš„åŒ…ä¸‹ï¼Œç„¶åå¦‚æœå¦ä¸€ä¸ªå·¥ç¨‹éœ€è¦å¤ç”¨è¿™å—åŠŸèƒ½çš„æ—¶å€™ï¼Œéœ€è¦å°†ä»£ç ç¡¬æ‹·è´åˆ°å¦ä¸€ä¸ªå·¥ç¨‹ï¼Œé‡æ–°é›†æˆä¸€éï¼Œéº»çƒ¦è‡³æã€‚

å¦‚æœæˆ‘ä»¬å°†è¿™äº›å¯ç‹¬ç«‹äºä¸šåŠ¡ä»£ç ä¹‹å¤–çš„åŠŸé…ç½®æ¨¡å—å°è£…æˆä¸€ä¸ªä¸ªstarterï¼Œå¤ç”¨çš„æ—¶å€™åªéœ€è¦å°†å…¶åœ¨pomä¸­å¼•ç”¨ä¾èµ–å³å¯ï¼ŒSpringBootä¸ºæˆ‘ä»¬å®Œæˆè‡ªåŠ¨è£…é…ï¼Œç®€ç›´ä¸è¦å¤ªçˆ½

## ä¸‰ã€ä»€ä¹ˆæ—¶å€™éœ€è¦åˆ›å»ºè‡ªå®šä¹‰starter

åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘å·¥ä½œä¸­ï¼Œå¯èƒ½ä¼šéœ€è¦å¼€å‘ä¸€ä¸ªé€šç”¨æ¨¡å—ï¼Œä»¥ä¾›å…¶å®ƒå·¥ç¨‹å¤ç”¨ã€‚SpringBootå°±ä¸ºæˆ‘ä»¬æä¾›è¿™æ ·çš„åŠŸèƒ½æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„é€šç”¨æ¨¡å—å°è£…æˆä¸€ä¸ªä¸ªstarterï¼Œè¿™æ ·å…¶å®ƒå·¥ç¨‹å¤ç”¨çš„æ—¶å€™åªéœ€è¦åœ¨pomä¸­å¼•ç”¨ä¾èµ–å³å¯ï¼Œç”±SpringBootä¸ºæˆ‘ä»¬å®Œæˆè‡ªåŠ¨è£…é…ã€‚

å¸¸è§åœºæ™¯ï¼š
   1.é€šç”¨æ¨¡å—-çŸ­ä¿¡å‘é€æ¨¡å—
   2.åŸºäºAOPæŠ€æœ¯å®ç°æ—¥å¿—åˆ‡é¢
  3.åˆ†å¸ƒå¼é›ªèŠ±IDï¼ŒLong-->string

## å››ã€è‡ªå®šä¹‰starterçš„å¼€å‘æµç¨‹

##### è‡ªå®šä¹‰starterçš„å¼€å‘æµç¨‹ï¼š

1.  åˆ›å»ºStarteré¡¹ç›®
2.  å®šä¹‰Starteréœ€è¦çš„é…ç½®ç±»(Properties)
3.  ç¼–å†™Starteré¡¹ç›®çš„ä¸šåŠ¡åŠŸèƒ½
4.  ç¼–å†™è‡ªåŠ¨é…ç½®ç±»
5.  ç¼–å†™spring.factoriesæ–‡ä»¶åŠ è½½è‡ªåŠ¨é…ç½®ç±»
6.  æ‰“åŒ…å®‰è£…ï¼ˆæ¨é€åˆ°ç§æœ/ä¸­å¤®ä»“åº“ï¼‰
7.  å…¶å®ƒé¡¹ç›®å¼•ç”¨

## äº”ã€å‘½åè§„èŒƒ

 SpringBootå®˜æ–¹å‘½åæ–¹å¼
       æ ¼å¼ï¼šspring-boot-starter-{æ¨¡å—å}
       ä¸¾ä¾‹ï¼šspring-boot-starter-web
       è‡ªå®šä¹‰å‘½åæ–¹å¼
       æ ¼å¼ï¼š{æ¨¡å—å}-spring-boot-starter
       ä¸¾ä¾‹ï¼šmystarter-spring-boot-starter

## å…­ã€æ­£å¼å¼€å§‹

#### ä¸€ã€ä½¿ç”¨ideaåˆ›å»ºä¸€ä¸ªspringBooté¡¹ç›®ï¼ˆç‰ˆæœ¬å°äº3.0ï¼‰

é»˜è®¤åœ¨Ideaç³»ç»Ÿè®¾ç½®é…å¥½äº†æœ¬åœ°çš„mavenç¯å¢ƒ

`å‹¾é€‰ä¸‹å›¾å¿…è¦ä¾èµ–`

![image-20230307162415835](../middleware/assets/image-20230307162415835.png)

#### äºŒã€ç¼–å†™ç›¸å…³å±æ€§é…ç½®ç±»

```java	

/**
 * ç»Ÿä¸€smsä½œä¸ºé…ç½®å‰ç¼€
 */
@ConfigurationProperties(prefix = "sms")
@Configuration
public class SmsProperties {
    /**
     * åº”ç”¨id
     */
    private String appId;

    /**
     * åº”ç”¨ç§˜é’¥
     */
    private String secretId;

	//çœç•¥get/set
}
```

#### ä¸‰ã€æœåŠ¡æä¾›ç±»

```java

/**
 * The interface Sms service.
 */
public interface ISmsService {
    /**
     * Send msg.
     *
     * @param phone the phone
     * @param msg   the msg
     */
    void sendMsg(String phone, String msg);
}

```

```java
@Component
public class ISmsServiceImpl implements ISmsService, Serializable {
    @Autowired
    SmsProperties smsProperties;
  
    Logger logger = LoggerFactory.getLogger(ISmsServiceImpl.class);

    @Override
    public void sendMsg(String phone, String msg) {
        logger.info(String.format("appid:%s", smsProperties.getAppId()));
        logger.info(String.format("secret:%s", smsProperties.getSecretId()));
        logger.info(String.format("æˆåŠŸç»™%så‘é€çŸ­ä¿¡ï¼š%s", phone, msg));
    }
}

```

#### å››ã€é…ç½®è‡ªåŠ¨è£…é…ç±»

##### æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨åˆ›å»ºç›¸å…³å¯¹è±¡äº¤å‹iocå®¹å™¨è¿›è¡Œç®¡ç†

```java
/**
 * @author bigtian
 */
@Configuration
@EnableConfigurationProperties({SmsProperties.class})
public class SmsAutoConfig {
    /**
     * æ­¤æ³¨è§£æ˜¯å½“beanå®¹å™¨é‡Œé¢æ²¡æœ‰è¿™ä¸ªbeançš„æ—¶å€™æ‰ä¼šæ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šè¦†ç›–æ‰ç”¨æˆ·è‡ªå·±å®šä¹‰çš„bean
     */
    @ConditionalOnMissingBean(ISmsService.class)
    @Bean
    public ISmsService smsProperties() {
        return new ISmsServiceImpl();
    }
}
```

##### æ–¹å¼ä¸€ï¼šä½¿ç”¨springç›¸å…³ç‰¹æ€§

```java
/**
 * @author bigtian
 */
@Configuration
/**
*é…ç½®éœ€è¦äº¤ç”±iocç®¡ç†çš„beanå¯¹è±¡åŒ…è·¯å¾„
*æ­¤æ–¹æ³•å¿…é¡»é…åˆç›¸å…³æ³¨è§£å¦‚ï¼š@Componentã€@Serviceç­‰äº¤ç”±iocç®¡ç†çš„æ³¨è§£
*ä¸èƒ½æ‰«æåˆ°ç±»ä¸Šé¢æ ‡æ³¨äº†@ConditionalOnMissingBeançš„å˜
*/
@ComponentScan(basePackages = {"club.bigtian.sms.*"})
public class SmsAutoConfig {
    
}

```



#### äº”ã€ç¼–å†™spring.factoriesæ–‡ä»¶åŠ è½½è‡ªåŠ¨é…ç½®ç±»

åœ¨`resources`ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª`META-INF`æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»º`spring.factories`æ–‡ä»¶

ç¼–è¾‘`spring.factories`æ–‡ä»¶

`åˆ‡è®°ä¸å¯ä¸€æ¬¡æ€§åˆ›å»ºå®Œæˆ`,ä¸‹å›¾æ ‡æ³¨çš„æ˜¯é”™è¯¯çš„

![image-20230307173008819](../middleware/assets/image-20230307173008819.png)

> é…ç½®è§„åˆ™

```sh
è§„åˆ™ï¼š`å¤šä¸ªè‡ªåŠ¨é…ç½®ç±»å¯ä»¥ç”¨é€—å·å’Œ\éš”å¼€`
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
  è‡ªåŠ¨é…ç½®ç±»å…¨è·¯å¾„
 
ç¤ºä¾‹ï¼š

å•ä¸ªï¼š
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
club.bigtian.sms.config.SmsAutoConfig

å¤šä¸ªï¼š
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
club.bigtian.sms.config.SmsAutoConfig,\
club.bigtian.sms.config.SmsAutoConfig
```

#### å…­ã€æ‰“åŒ…æµ‹è¯•

##### ä¸€ã€æ‰“åŒ…

1ã€åœ¨pom.xmlä¸­åŠ å…¥ä»¥ä¸‹ä¸‹é…ç½®

```xml
	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<version>3.10.1</version>
				<configuration>
					<encoding>utf-8</encoding>
					<source>8</source>
					<target>8</target>
				</configuration>
			</plugin>
			<!-- ç”Ÿæˆjava source.jar -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-source-plugin</artifactId>
				<version>2.2.1</version>
				<executions>
					<execution>
						<id>attach-sources</id>
						<goals>
							<goal>jar-no-fork</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
		</plugins>
	</build>
```

##### 2ã€ä½¿ç”¨mavenæ‰“åŒ…åˆ°æœ¬åœ°ä»“åº“

<img src="../middleware/assets/image-20230307174410172.png" alt="image-20230307174410172" style="zoom:67%;" />

ç¨ç­‰ç‰‡åˆ»åå°±ä¼šæŠŠstarteræ‰“è¿›æœ¬åœ°ä»“åº“ï¼Œå¦‚ä¸‹å›¾å°±å·²ç»æˆåŠŸäº†

<img src="../middleware/assets/image-20230307174635615.png" alt="image-20230307174635615" style="zoom:50%;" />

#### äºŒã€æµ‹è¯•starter

##### 1ã€æ–°å»ºä¸€ä¸ªæ–°çš„spring booté¡¹ç›®

##### 2ã€åœ¨pom.xmlä¸­å¼•å…¥manvenåæ ‡

```xml
		<dependency>
			<groupId>club.bigtian</groupId>
			<artifactId>sms</artifactId>
			<version>0.0.1-SNAPSHOT</version>
		</dependency>
```

##### 3ã€é…ç½®yml

```yaml
sms:
  app-id: 2134123
  secret-id: secretId
```

##### 4ã€å¯åŠ¨ç¨‹åº

![image-20230308163042874](../middleware/assets/image-20230308163042874.png)

å¦‚ä¸Šå›¾è¾“å‡ºä¾¿æ˜¯æˆåŠŸäº†ï¼Œæœ¬ç« ç»“æŸ

## äºŒã€Starteræ‰“åŒ…åˆ°ç§æœ/ä¸­å¤®ä»“åº“

> å‰æ
>
> åˆ°æ­¤é»˜è®¤è‡ªå®šä¹‰starterå·²ç»æˆåŠŸï¼Œæ¥ä¸‹æ¥æ˜¯åŸºäºä¸Šæ–¹åšäº›é…ç½®

### ä¸€ã€å®‰è£…ç§æœ

```sh
docker run -d -p 8081:8081 --name nexus sonatype/nexus3
```

å¯åŠ¨åç™»å½•é»˜è®¤ç”¨æˆ·åä¸º`admin`å¯†ç éœ€è¦è¿›å…¥docker/liunxç›¸å¯¹åº”çš„æ–‡ä»¶æŸ¥çœ‹

![image-20230308164905028](../middleware/assets/image-20230308164905028.png)

#### äºŒã€é…ç½®maven settings.xmlæ–‡ä»¶

```xml
  <servers>
    <server>
        <id>idï¼ˆå»ºè®®ä»¥releasesã€snapshotså‘½åï¼‰</id>
        <username>ç§æœè´¦å·</username>
        <password>ç§æœå¯†ç </password>
    </server>
  </servers>
```

#### ä¸‰ã€è·å–æ¨é€ä»“åº“é“¾æ¥

![image-20230309170112260](../middleware/assets/image-20230309170112260.png)

#### å››ã€é…ç½®pom.xml

```xml
       <!--é…ç½®è¿œç¨‹æ¨é€ä»“åº“ç›¸å…³ä¿¡æ¯-->
    <distributionManagement>
        <repository>
            <id>éœ€ä¸ç¬¬äºŒæ­¥çš„idä¸€è‡´</id>
            <name>éšæ„å–å</name>
            <url>ç¬¬ä¸‰æ­¥çš„ä»“åº“é“¾æ¥</url>
        </repository>
    </distributionManagement>

    <!--	é…ç½®ç§æœåœ°å€-->
    <repositories>
        <repository>
            <id>releases</id>
            <name>releases</name>
            <url>ç¬¬ä¸‰æ­¥çš„ä»“åº“é“¾æ¥</url>
            <releases>
                <enabled>true</enabled>
            </releases>
        </repository>
    </repositories>
```

#### äº”ã€æ‰“åŒ…è¿›ç§æœ

###### 1ã€æ‰§è¡Œå‘½ä»¤`mvn deploy`ä¹‹åç­‰å¾…æ‰“åŒ…ç¨‹åºæ‰§è¡Œå®Œæˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºå³ä¸ºæˆåŠŸ

![image-20230309172059461](../middleware/assets/image-20230309172059461.png)

###### 2ã€è¿›å…¥ç§æœæŸ¥çœ‹å¯¹åº”çš„ä»“åº“å†…å®¹

![image-20230309172238068](../middleware/assets/image-20230309172238068.png)

###### 3ã€æ¸…é™¤æœ¬åœ°ä»“åº“çš„ç›¸å…³jaråŒ…

###### 4ã€è¿›å…¥ideaåˆ·æ–°Mavenä¾èµ–

###### 5ã€å¯åŠ¨é¡¹ç›®çœ‹æ—¥å¿—è¾“å‡ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºå³ä¸ºæˆåŠŸ

![image-20230309173946443](../middleware/assets/image-20230309173946443.png)

æœ¬ç« æ•™ç¨‹ç»“æŸï¼Œä¸‹æ¬¡å†è§ğŸ‘‹ğŸ»
